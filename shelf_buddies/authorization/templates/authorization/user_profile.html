{% extends 'base.html' %}
{% block content %}

<h1>{{ profile.user.username }}'s Profile</h1>

<div class="user-info">
    <p>Followers: {{ profile.followers.count }}</p>
    <p>Following: {{ profile.user.following.count }}</p>
    {% if request.user != profile.user %}
        {% if request.user not in profile.followers.all %}
            <a href="{% url 'follow_user' profile.user.username %}">Follow</a>
        {% else %}
            <a href="{% url 'unfollow_user' profile.user.username %}">Unfollow</a>
        {% endif %}
    {% endif %}
</div>

<div class="books">
    <h2>Books</h2>
    <ul>
        <li>Read: {{ profile.books_read.count }}</li>
        <li>Want to Read: {{ profile.books_want_to_read.count }}</li>
        <li>Currently Reading: {{ profile.books_currently_reading.count }}</li>
    </ul>
</div>

<div class="posts">
    <h2>Posts</h2>
    <ul>
        {% for post in posts %}
        <li>
            <p>Book: {{ post.book.title }}</p>
            <p>Rating: {{ post.rating }}</p>
            <p>{{ post.content }}</p>
        </li>
        {% endfor %}
    </ul>
</div>

{% endblock %}
