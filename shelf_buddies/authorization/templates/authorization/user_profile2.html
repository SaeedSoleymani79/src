{% load static %}
<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        /* CSS code */

    @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Koulen&family=Lato&family=Nunito&family=Playfair+Display:ital@1&family=Prata&family=Raleway:ital,wght@1,100&family=Roboto&family=Roboto+Condensed&family=Teko&display=swap');

    @media screen and (max-width: 600px) {
    .navbar {
        width: 100%;
        height: auto;
        position: relative;
    }
    .profile {
        margin-left: 0;
        width: 100%;
    }
    }

        a:hover {
            transition : 610ms;
            transform : translateY(-0px);
            background-color: #fff;
            color: #0066cc;
            border: none;
        }

        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            font-family: Roboto, sans-serif;
        }
        .navbar {
            width: 15%;
            height: 100%;
            position: fixed;
            background-color: #f2f2f2;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 1em;
        }
        .navbar div {
            display: flex;
            flex-direction: column;
        }
        .navbar a {
            text-decoration: none;
            color: black;
            margin-bottom: 1em;
        }
        .navbar .middle {
            margin-top: 2em;
        }
        .navbar .bottom {
            margin-top: auto;
            margin-bottom: 5px;
        }

        #search-sidebar {
            margin-left: 30px;
            position: fixed;
            width: 200px;
            height: 100%;
            overflow: auto;
            background-color: #f2f2f2;
            left: 15%; /* Adjust this value to match the width of your navbar */
            transform: translateX(-100%);
            transition: transform 5s ease; /* Add transition */
        }
        
        #search-results a{
            display: block;
            padding: 10px;
            margin: 5px 0;
            color: black;
            text-decoration: none;
        }

        #search-results a:hover {
            background-color: #f2f2f2;
        }
                
        #overlay {
            display: none;
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 2;
        }
        .loader {
            width: 10px;
            height: 15px;
            border-radius: 30%;
            display: block;
            margin:20px auto;
            position: relative;
            color: #000;
            box-sizing: border-box;
            animation: animloader 1s linear infinite alternate;
          }
          
          @keyframes animloader {
            0% {
              box-shadow: -38px -12px ,  -14px 0,  14px 0, 38px 0;
            }
            33% {
              box-shadow: -38px 0px, -14px -12px,  14px 0, 38px 0;
            }
            66% {
              box-shadow: -38px 0px , -14px 0, 14px -12px, 38px 0;
            }
            100% {
              box-shadow: -38px 0 , -14px 0, 14px 0 , 38px -12px;
            }
          }


        .fa {
        margin-right: 5px;
        }

        .fa-home {
        color: #2a2a2a;
        }

        .fa-search {
        color: #2a2a2a;
        }

        .fa-book {
        color: #2a2a2a;
        }

        .fa-plus {
        color: #2a2a2a;
        }

        .fa-bookmark {
        color: #2a2a2a;
        }

        .fa-cog {
        color: #2a2a2a;
        }

        .fa-sign-out {
        color: #2a2a2a;
        }

        .profile {
            margin-left: 15%;
            padding: 20px;
            padding-left: 5%;
        }
        .profile-bottom {
            display: flex;
            justify-content: space-between;
            max-width: fit-content;
            margin-left: 60px;
            margin-top: 20px;
        }

        .profile-bottom p {
            width: fit-content;
            margin-left: 7px;
        }
        .profile-bottom p:hover{
            color: #0066cc;
        }
        .profile img {
            border-radius: 30px;
            margin-right: 20px;
            height: 150px; /* Adjust as needed */
        }
        .user-info {
            display: flex;
            align-items: center;
        }
        .book-list {
            border-radius: 10px;
            box-shadow: rgb(56, 56, 56) 5px 1px 9px -5px;
            margin-bottom: 15px;
            margin-top: 15px;
            height: 75px;
        }
        .book-list-sec {
            justify-content: space-between;
            margin-bottom: 30px;
            margin-top: 30px;
        }

        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Koulen&family=Lato&family=Nunito&family=Playfair+Display:ital@1&family=Prata&family=Raleway:ital,wght@1,100&family=Roboto&family=Roboto+Condensed&family=Teko&display=swap');

        .btn{

        font-family: Roboto, sans-serif;
        font-weight: 0;
        font-size: 14px;
        color: #6e6e6e;
        background-color: #fcfcfc;
        padding: 7px 20px;
        border: solid #ffffff 2px;
        box-shadow: rgb(56, 56, 56) 2px 0px 18px -6px;
        border-radius: 50px;
        transition : 610ms;
        transform: translateY(0);
        display: flex;
        flex-direction: row;
        align-items: center;
        cursor: pointer;
        }

        .btn:hover{

        transition : 610ms;
        padding: 10px 23px;
        transform : translateY(-0px);
        background-color: #fff;
        color: #0066cc;
        border: none;
        }

        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            padding-top: 100px; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(10px); 
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        
        .line {
            width: 100%; /* Adjust as needed */
            height: 2px; /* Adjust as needed */
            background-color: black; /* Adjust as needed */
            margin: 20px 0; /* Adjust as needed */
            box-shadow: 0 0 10px 1px rgba(0, 0, 0, 0.2);
        }
        
    </style>
</head>
<body>
    <div class="navbar">
        <!-- Top Navbar content -->
        <div>
            <img src="/static/images/logo.png" alt="Logo">
            <br><br>
            <a href="{% url 'profile' request.user.username %}"><i class="fa fa-home"></i> Reader Page</a>
            <a id="search-link" href="#"><i class="fa fa-search"></i> Search</a>
            <div id="search-sidebar" style="display: none;">
                <input type="text" id="search-input" placeholder="Search users...">
            <div id="search-results">
            </div>
            </div>
            <a href="#"><i class="fa fa-book"></i> My Library</a>
        </div>
    
        <!-- Middle Navbar content -->
        <div class="middle">
            <a href="#"><i class="fa fa-plus"></i> Create New</a>
            <a href="#"><i class="fa fa-bookmark"></i> Favourite</a>
        </div>
    
        <!-- Bottom Navbar content -->
        <div class="bottom">
            <a id='settingslink' href="#"><i class="fa fa-cog"></i> Settings</a>
            <!-- Settings Modal -->
            <div id="settingsModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span class="close">Ã—</span>
                    <a href={% url 'password_change' %}><p>change password</p></a>
                </div>
            </div>

            <a href="{% url 'logout' %}"><i class="fa fa-sign-out"></i> Log Out</a>
        </div>
    </div>
    <div class="profile">
        <div class="profile-top" style="display: flex; align-items: center;">
            {% if profile.profile_image %}
                <img src="{{ profile.profile_image.url }}" alt="User">
            {% else %}
                <img src="{% static 'images/image.png' %}" alt="User">
            {% endif %}
            <div style="display: flex; flex-direction: column;">
                <div class="user-info" style="margin-left: 20px;">
                    <h2>{{ profile.user.username }}</h2>
                    {% if request.user.is_authenticated %}
                        {% if request.user == profile.user %}
                            <!-- Edit Profile Button -->
                            <button class="btn" style="margin-left: 20px;"><a href={% url 'edit_profile' profile.user.username %}>Edit Profile</a></button>
                        {% elif request.user in profile.followers.all %}
                            <!-- Unfollow Button -->
                            <form method="POST" action="{% url 'unfollow_user' profile.user.username %}">
                                {% csrf_token %}
                                <button class="btn" style="margin-left: 20px;">Unfollow</button>
                            </form>
                        {% else %}
                            <!-- Follow Button -->
                            <form method="POST" action="{% url 'follow_user' profile.user.username %}">
                                {% csrf_token %}
                                <button class="btn" style="margin-left: 20px;">Follow</button>
                            </form>
                        {% endif %}
                    {% endif %}
                </div>
                <div class="profile-bottom" style="margin-left: 20px;">
                    <!-- Followers Link -->
                    <a style="margin-right: 20px;" id="followersLink" href="{% url 'followers' profile.user.username %}" >{{ profile.followers.count }} followers</a>

                    <!-- Followers Modal -->
                    <div id="followersModal" class="modal">
                        <div class="modal-content">
                            <span class="close">Ã—</span>
                            {% for follower in profile.followers.all %}
                                <a href={% url 'profile' follower.username%}><p>{{ follower.username }}</p></a>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Following Link -->
                    <a id="followingLink" href="{% url 'following' profile.user.username %}" id="followingLink">{{ profile.following.count }} following</a>

                    <!-- Following Modal -->
                    <div id="followingModal" class="modal">
                        <div class="modal-content">
                            <span class="close">Ã—</span>
                            {% for followed_user in profile.following.all %}
                                <a href={% url 'profile' followed_user.username%}><p>{{ followed_user.username }}</p></a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <!-- Bio -->
                <div style="margin-left:20px; margin-top: 20px;" class="bio-sec">
                    {% if profile.profile_bio %}
                        <p>{{ profile.profile_bio }}</p>
                    {% else %}
                        <br>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Line -->
        <div class="line"></div>
        
        <!-- Book Lists -->
        <div class="book-list-sec" style="margin-top: 50px;">        
            <div class="book-list">
                <img src="book.jpg" alt="Book">
                <p>Reading</p>
            </div>
            <div class="book-list">
                <img src="book.jpg" alt="Book">
                <p>Want to Read</p>
            </div>
            <div class="book-list">
                <img src="book.jpg" alt="Book">
                <p>Already Read</p>
            </div>
        </div>
    </div>


    <!-- JavaScript code -->
    <script>
    $(document).ready(function() {

        $('#followersLink').click(function(event) {
            console.log('Followers link clicked');
            event.preventDefault();
            $('#followersModal').show();
        });
        
        $('#followingLink').click(function(event) {
            console.log('Following link clicked');
            event.preventDefault();
            $('#followingModal').show();
        });

        $('.close').click(function() {
            $('.modal').hide();
        });
        
        $(window).click(function(event) {
            if ($(event.target).hasClass('modal')) {
                $('.modal').hide();
            }
        });
    });
    $(document).ready(function() {
        // When the user clicks the button, open the modal 
        $('#settingslink').click(function() {
            $('#settingsModal').show();
        });

        // When the user clicks on <span> (x), close the modal
        $('.close').click(function() {
            $('#settingsModal').hide();
        });

        // When the user clicks anywhere outside of the modal, close it
        $(window).click(function(event) {
            if ($(event.target).is('#settingsModal')) {
                $('#settingsModal').hide();
            }
        });
    });
        
    $(document).ready(function(){
        $('#search-link').on('click', function(e) {
            e.preventDefault();
            if ($('#search-sidebar').css('display') === 'none') {
                $('#search-sidebar').css('transform', 'translateX(-100px)'); // Slide out
                $('#search-sidebar').css('display', 'block'); // Show if it's hidden
                $('#search-sidebar').css('transform', 'translateX(0px)'); // Slide out
                $('#overlay').show(); // Show overlay
            } else {
                $('#search-sidebar').css('display', 'none'); // Slide in if it's visible
                $('#overlay').hide(); // Hide overlay
            }
        });
    
        $('#search-input').on('input', function(e){
            $.ajax({
                url: '/search/',  // Update with your search view URL
                data: {
                  'q': $('#search-input').val()
                },
                dataType: 'json',
                success: function (data) {
                    $('#search-results').empty();
                    $.each(data, function(index, element) {
                        $('#search-results').append('<a href="' + element.url + '">' + element.username + '</a><br>');
                    });
                }
            });
        });
    });    
    </script>


</body>
</html>
<!---
I'm glad to hear that it worked! Here's how you can customize the code further:

1. **Adjusting Spaces**: You can adjust the spaces between elements using CSS properties like `margin` and `padding`. For example, if you want to increase the space between the navbar links, you could increase the `margin-bottom` value in the `.navbar a` rule.

2. **Adding Icons**: To add icons before the sidebar navigation links, you can use an icon library like Font Awesome. First, include the Font Awesome CDN link in your HTML file. Then, you can add an `<i>` tag with the appropriate class names before each link text. Here's an example:

```html
<a href="#"><i class="fas fa-home"></i> Home Page</a>
```
In this example, `fas fa-home` is the class for the home icon in Font Awesome. You can find the class for each icon in the Font Awesome icon gallery.

Remember, HTML and CSS are very flexible, so there are many ways to achieve your desired layout and design. Feel free to experiment with different properties and values to see what works best for you. Happy coding! ðŸ˜Š
-->
